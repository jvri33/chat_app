create_reminder = [
"Añade una alarma el 5 de octubre a las 7 para ir al medico",
"Añade un recordatorio para ir al dentista el dia 8",
"Añade una aviso mañana para hacer la cena",
"Añade una tarea a las 7 para hacer una videollamada",
"Avisame hoy a las 7",
"Avisame el miercoles que viene para ir a comprar a las 5",
"Avisame el dia 6 de octubre para sacar las entradas",
"Avisame a las 5 para despertarme de la siesta",
"Crea una alarma mañana a las 9 de la mañana",
"Avisa el miercoles para entrenar",
"poner recordatorio a las 5",
"añademe una tarea el jueves que viene para hacer deberes",
"añade un recordatorio el domingo que me voy al campo",
"programame un aviso pasadomañana a las 3",
"añademe una tarea para ir al fisio el jueves 29 a las 4",
"recuerda que vaya a comprar pasta mañana a las 12",
"añade un recordatorio para hacer la compra el sabado a las 10 de la mañana",
"recuerdame que vaya a la oficina el miercoles que viene",
"crea un recordatorio el 15 de abril porque son paellas en alicante",
"avisar hoy a las 7",
"recordar mañana que vaya a ver a mi abuela",
"avisame pasadomañana a las 5 para ir al taller",
"programa una alarma el sabado a las 8 de la mañana",
"crear un recordatorio todos los dias durante la semana que viene a las 7 de la tarde",
"añademe un aviso para hacer la renta mañana ",
"recuerda que tengo oculista el viernes a las 3 de la tarde",
"recuerda la reunion mañana a las 10 de la mañana",
"añade una tarea el jueves 13 para ir a la tienda",
"avisame para ir al gimnasio mañana a las 18:00",
"crea una alarma la semana que viene a las 9 todos los días",
"programame un recordatorio para hacer la compra hoy a las 7",
"quiero añadir un aviso el martes a las 14:00",
"avisa para irme a correr a las 8 de la tarde",
"añademe un aviso el dia 5 a las 3 para ir al hospital",
"quiero crear una tarea a las 4 el jueves para salir antes de trabajar",
"añade una alarma pasadomañana a las 6 de la mañana",
"poner un recordatorio para el dentista el jueves",
"programa el viernes un aviso para ir a hacerme la analitica",
"creame una tarea para ir a la biblioteca a estudiar el lunes que viene",
"quiero programar un alarma a las 6 de la mañana el lunes que viene",
"avisar el lunes para la reunion de las 10 de la mañana",
"creame un recordatorio para ir a cenar el sabado",
"quiero programar un aviso el domingo 29 de abril porque tengo boda",
"programame una reunion el miercoles con los del trabajo",
"programar aviso el dia 7 a las 7",
"añademe una tarea para la revision el coche el miercoles que viene",
"quiero programar la cita del 7 de mayo",
"quiero crear una alarma el 5 a las 8 de la mañana",
"pon una alarma pasadomañana a las 8 menos cuarto",
"poner aviso el lunes 15 a las 14:00",
"avisame para llamar al medico mañana a las 15:00",
"recuerda que busque lo del viaje a las 9 mañana",
"programar tarea el jueves 15 a las 3 y media",
"quiero crear otra tarea el martes que viene a las 9 de la noche",
"avisar para ir a la revision del coche pasadomañana a las 10 de la mañana",
"crea un  recordatorio todos los lunes a las 10 de la mañana para poner la lavadora",
"recordar que vaya a llevarle las compra a mi tia mañan",
"crear una alarma mañana a las 5 y media de la tarde",
"añadir aviso el miercoles 20 de mayo",
"quiero poner un recordatorio",
"pon un recordatorio",
"como pongo una alarma",
"como pongo un recordatorio",
"poner un recordatorio",
"poner una alarma",
"quiero poner un aviso",
"alarma",
"recordatorio",
"como añado una tarea",
"añadir tarea",
"quiero crear un recordatorio el sabado",
"quiero crear un recordatorio el viernes",
"crear recordatorio el 27 de junio",
"crear recordatorio mañana",
"crear alarma mañana",
"crea alarma mañana",
"quiero crear un recordatorio el viernes",
"pon recordatorio el sabado",
]
calendar = [
    "quiero ver el calendario",
    "calendario",
    "muestrame el calendario",
    "enseñame el calendario",
    "quiero ver todo lo que tengo este mes",
    "que tengo este mes",
    "saca el calendario",
    "quiero ver el calendario",
    "puedes sacar el calendario",
    "puedo ver el calendario",
    "calendario de este mes",
    "quiero ver el calendario de este mes",
    "quiero consultar el calendario",
    "consultar el calendario",
    "quiero ver todos mis recordatorios",
    "ver todos mis avisos",
    "me gustaria ver todas las alarmas de este mes",
    "enseñame todas las tareas del calendario",
    "quiero ver todo lo que hay este mes",
    "enseñame todos mis recordatorios",
    "todas las tareas",
    "tareas calendario",
]
function = ["que eres capaz de hacer",
"que haces",
"que puedes hacer",
"para que sirves",
"como me puedes ayudar",
"para que me sirves",
"como funcionas",
"como funciona esto",
"que eres",
"que te tengo que decir",
"como funcionas",
"que hago ",
"que hago contigo",
"que sabes hacer",
"que sabes hacer",
"que te digo",
"que te puedo decir",
"como puedo poner un aviso",
"como creo cosas",
"como pongo tareas y recordatorios",
"sabes hacer algo mas",
"que deberia decirte",
"cual es tu funcionamiento",
"como hago cosas contigo",
"como hago para que pongas una alarma",
"sabes poner alarmas?",
"ayudame",
"tutorial",
"dime que haces"]
edit01 = ["editar recordatorio",
"quiero editar un recordatorio",
"editar alarma",
"editar aviso",
"editar tarea",
"quiero cambiar una tarea",
"cambiar un recordatorio",
"cambiar el recordatorio del dia 15",
"editar recordatorio 5 de mayo",
"modificar tarea",
"modificar recordatorio",
"cambiar tarea del 3 de marzo",
"editar la tarea del miercoles",
"como cambio un recordatorio",
"edicion tarea",
"edicion recordatorio",
"edicion aviso",
"edicion alarma",
"editar recordatorio dia 15",
"cambiar alarma del martes",
"quiero cambiar la alarma de mañana",
"ayudame a cambiar una alarma",
"como puedo editar un aviso",
"me gustaria editar el aviso el miercoles que viene",
"modificar alarma del 15 de marzo",
"cambiar tarea mañana",
"quiero editar la alarma que acabo de crear",
"editar alarma de pasadomañana",
"editar la tarea de la semana que viene",
"me gustaria cambiar el recordatorio de esta tarde",
"quiero editar la tarea de mañana",
"modificar recordatorio hoy",
"como modifico una tarea",
"como edito una alarma",
"edicion recordatorio de mañana",
]
delete01 = ["quiero borrar un recordatorio",
"borrar recordatorio",
"eliminar recordatorio",
"quiero eliminar un recordatorio",
"como elimino un recordatorio",
"me gustaria eliminar un recordatorio",
"quiero eliminar un aviso",
"eliminar aviso",
"eliminar tarea",
"como elimino una tarea",
"eliminar alarma",
"quiero eliminar una alarma",
"como elimino una alarma",
"me gustaria eliminar una alarma",
"borrar alarma",
"quitar alarma",
"quiero quitar la alarma de las 2",
"borrar tarea de mañana",
"eliminar recordatorio hoy",
"me gustaria quitar la tarea del miercoles 15",
"como elimino el aviso de mañana",
"elimina el recordatorio del sabado a las 3",
"quita la alarma del martes",
"elimina el aviso del jueves",
"borrar la tarea de mañana",
"borra la alarma de mañana por la tarde",
"quiero que borres el aviso del 15",
"quiero que elimines la alarma del jueves",
"eliminar alarma pasadomañana",
"eliminar recordatorio miercoles 15 de mayo",
"eliminar alarma 7 de abril",
"quita el recordatoriop de la semana que viene",
"borrar tarea de 2 de junio",
]
day01 = ["tengo algo hoy",
"que tengo hoy",
"agenda hoy",
"recordatorios hoy",
"dime que tengo hoy",
"tengo alguna cosa hoy?",
"tengo alguna alarma puesta hoy",
"cosas hoy",
"tengo cosas que hacer hoy",
"que tengo que hacer hoy",
"que tengo puesto hoy",
"avisos hoy",
"que avisos o tareas tengo hoy",
"tengo algun recordatorio para hoy",
"que recordatorios tengo hoy",
"tengo alarmas hoy",
"que alarmas tengo hoy",
"alarma hoy",
"hoy tengo algo",
"tengo alarmas durante el dia de hoy",
"tengo recordatorio hoy",
"tengo tareas para hoy",
"algo que hacer hoy",
"algo hoy",
"que hay hoy",
"tengo recordatorios hoy",
"tengo algun recordatorio o alarma hoy",
"tengo alguna cosa para hoy",
"hoy",
"hoy agenda",
"que tengo el 23 de junio",
"que tengo el miercoles",
"que tengo el martes que viene",
"que hay el viernes",
"que tengo mañana",
"tengo algo el 24",
"que tengo el dia 31",
"que recordatorio tengo el dia 27",
"que ntego el dia 31 de julio",
"tengo algo que hacer el 26 de septiembre",
"tengo tareas mañana",
"tengo algo el dia 27?",
"que cosas tengo que hacer el dia 3",
"tengo que hacer algo el viernes",
"dime que tengo que hacer el jueves",
"dime si tengo recordatorios el domingo que viene",
"tengo algo pasadomañana",
"que tengo el viernes 12",
"que cosas tengo para el jueves",
"recuerdame lo que tengo el sabado",
"dime lo que tengo apuntado el 17",
"que cosas tengo que hacer el jueves",
"que recordatorio tengo el domingo",
"27 de enero",
"dia 23",
"recordatorios 2",
"recordatorios 9 de junio",
"que tengo el jueves",
"que tengo el viernes 13",
"recuerdame lo que tengo el jueves",
"recuerdame lo que tengo que hacer el miercoles",
"que tengo para el lunes",
"que tengo el martes que viene",
"que tengo el martes",
"que tengo el miercoles",
"que tengo el miércoles",
"que tengo el miercoles que viene",
"que tengo el viernes",
"que tengo el sabado",
"que tengo el viernes 14",
"que tengo el martes 12",
"que tengo el 7 de septiembre",
"que tengo el 3 de marzo",

]
thisweek = [
"esta semana",
"que tengo esta semana",
"que cosas tengo esta semana",
"que hay esta semana",
"tengo algo esta semana",
"dime que tengo esta semana",
"puedes decirme lo que tengo esta semana",
"recuerdame lo que tengo esta semana",
"que tengo estos dias",
"dime que tengo estos días",
"hola que tengo esta semana",
"dime los recordatorios que tengo esta semana",
"puedes decirme que cosas tengo que hacer estos dias",
"que tengo que hacer estos dias",
"que tengo durante esta semana",
"tengo cosas que hacer esta semana",
]
nextweek = [
"la semana que viene",
"que tengo la proxima semana",
"dime lo que tengo la semana que viene",
"puedes decirme lo que tengo la proxima semana",
"que es lo que tengo la semana que viene",
"que hay la semana que viene",
"recuerdame lo que tengo la proxima semana",
"que tengo semana que viene",
"que cosas tengo la semana que viene",
"que hay la proxima semana",
"tengo algo la semana que viene",
"dime que tengo la semana que viene",
"puedes decirme lo que tengo la semana que viene",
"recuerdame lo que tengo la semana que viene",
"que tengo la semana que viene",
"dime que tengo la proxima semana",
"hola que tengo la semana que viene",
"dime los recordatorios que tengo la semana que viene",
"puedes decirme que cosas tengo que hacer la semana que viene",
"que tengo que hacer la proxima semana",
"que tengo durante la proxima semana",
"tengo cosas que hacer la semana que viene",


]
qr = ["qr",
"escanear qr",
"quiero escanear un qr",
"me gustaria escanear un qr",
"puedes escanear un qr",
"escanea un qr",
"tengo un qr, lo escaneas?",
"scan qr",
"que hay en este qr",
"saca un qr",
"que hay en este qr",
"puedes escanear un qr",
"ayudame a escanear un qr",
]
pdf = ["quiero escanear una foto",
"escanear foto",
"quiero escanear un pdf",
"quiero pasar esta foto a pdf",
"me gustaria escanear una foto y pasarla a pdf",
"pdf",
"escanear pdf",
"puedes escanear una imagen",
"imagen a pdf",
"escanear imagen",
"quiero escanear un doumento",
"escanear una foto",
"puedes escanear de un dibujo",
]

intents = []
labels = []

for i in range(len(create_reminder)):
    intents.append(create_reminder[i])
    labels.append("REMINDER01")

for i in range(len(calendar)):
    intents.append(calendar[i])
    labels.append("CALENDAR00")

for i in range(len(function)):
    intents.append(function[i])
    labels.append("FUNCTION00")

for i in range(len(edit01)):
    intents.append(edit01[i])
    labels.append("EDIT01")

for i in range(len(delete01)):
    intents.append(delete01[i])
    labels.append("DELETE01")

for i in range(len(day01)):
    intents.append(day01[i])
    labels.append("DAY01")

for i in range(len(thisweek)):
    intents.append(thisweek[i])
    labels.append("THISWEEK00")

for i in range(len(nextweek)):
    intents.append(nextweek[i])
    labels.append("NEXTWEEK00")

for i in range(len(qr)):
    intents.append(qr[i])
    labels.append("QR00")
    
for i in range(len(pdf)):
    intents.append(pdf[i])
    labels.append("PDF00")    


#print(intents,labels)


import tensorflow as tf
import numpy as np
from tensorflow.keras.preprocessing.text import Tokenizer
from tensorflow.keras.preprocessing.sequence import pad_sequences
from tensorflow.keras.utils import to_categorical

#Creacion e inicialización del Tokenizer
intents_tokenizer = Tokenizer(num_words = 1000,oov_token = "<OOV>")

#Se asigna un token a cada palabra
intents_tokenizer.fit_on_texts(intents)
#se recorren las frases para sustituir cada palabra con su respectivo token
seq = intents_tokenizer.texts_to_sequences(intents) 

#se padean las frases con la longitud máxima de entre todas las frases
longest_intent = max(seq, key=len)
pad_len = len(longest_intent)
padded_seq = pad_sequences(seq,maxlen = pad_len, padding='post')

#se tokenizan las etiquetas
labels_tokenizer = Tokenizer()
labels_tokenizer.fit_on_texts(labels)

#se repesentan las etiquetas en un vector de 
#one hot encoding label 5: [0 0 0 0 1]  label: 1[1 0 0 0 0]
label_seq = np.array(labels_tokenizer.texts_to_sequences(labels)) -1
labels_cat = to_categorical(label_seq)


model = tf.keras.Sequential([
    tf.keras.layers.Embedding(500, 128, input_length=pad_len),
    tf.keras.layers.Flatten(),
    #//tf.keras.layers.Bidirectional(tf.keras.layers.LSTM(64, return_sequences=True)),
    #tf.keras.layers.GlobalMaxPooling1D(),
    tf.keras.layers.Dense(128, activation='relu'),
    tf.keras.layers.Dense(128, activation='relu'),
    tf.keras.layers.Dropout(0.5),
    tf.keras.layers.Dense(10, activation='softmax')
])

model.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])

padded_seq = np.array(padded_seq)
labels_cat = np.array(labels_cat)

history = model.fit(padded_seq, labels_cat,
                    epochs=50,
                    batch_size=32,
                    #validation_data=(val_sequence,val_tags)
                   )

frase = ["quiero poner un recordatorio el 21 de marzo"]
frase_tok = intents_tokenizer.texts_to_sequences(frase)
frase_tok = pad_sequences(frase_tok,maxlen = pad_len, padding='post')

print(frase_tok)

print(labels_tokenizer.word_index)

pred = model.predict(frase_tok)
print(pred)

import json

with open('assets/vocabulario_intents.json','w') as f:
    json.dump(intents_tokenizer.word_index,f)

converter = tf.lite.TFLiteConverter.from_keras_model(model)
tflite_model = converter.convert()

with open('assets/modelo_intents.tflite','wb') as f:
    f.write(tflite_model)